function navigationHighLigth(){const e=document.querySelector(".pages-selector");e&&document.addEventListener("wheel",t=>{e.classList.add("pages-selector--highligth"),setTimeout(()=>{e.classList.remove("pages-selector--highligth")},500)})}function isMobile(){return window.matchMedia("(max-width: 1230px)").matches||"ontouchstart"in window}function sendForm(){let e=document.querySelector(".form"),t=document.querySelector(".spinner-border"),i=document.querySelector(".form-success");e.addEventListener("submit",a=>{new Promise((function(n,r){a.preventDefault(),e.classList.add("visually-hidden"),t.classList.remove("visually-hidden"),setTimeout(()=>n(t.classList.add("visually-hidden"),i.classList.remove("visually-hidden")),5e3)}))})}function swipersInit(){pageSlider();const e=new Swiper(".review-box",{pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),t=new Swiper(".mySwiper-Regular",{pagination:{el:".swiper-pagination--regular",type:"fraction"},width:290,breakpoints:{380:{width:320},580:{width:450},1480:{width:945}}});function i(e,t,i){t&&(e.addEventListener("click",()=>{i.slideNext()}),t.addEventListener("click",()=>{i.slidePrev()}))}i(document.querySelector(".review-next--regular"),document.querySelector(".review-prev--regular"),t),i(document.querySelector(".review-next"),document.querySelector(".review-prev"),e)}function dualSwitcher(e){if(e){let t=e.querySelectorAll(".product-selector__item"),i=e.querySelectorAll(".description-item");t.forEach((e,a)=>{e.addEventListener("click",()=>{t.forEach((e,t)=>{e.classList.remove("product-selector__item--active")}),e.classList.add("product-selector__item--active"),i.forEach(e=>{e.classList.remove("description-item--active")}),i[a].classList.add("description-item--active")})})}}function handleTabletChange(e){if(window.matchMedia("(min-width: 1230px)").matches){let e=document.querySelector(".fp-right");if(e){pageUpbutt.className="page-up",pageUpbutt.innerHTML="НАВЕРХ";let t=document.createElement("div");t.className="pagination-page",t.innerHTML='<span class="pagination-page--active">1</span><span class=pagination-page--all>/9</span> ',e.append(t),e.append(pageUpbutt),document.querySelector(".page-up").addEventListener("click",(function(e){fullpage_api.moveTo(1)}))}}}function addScrollSpy(){document.querySelector(".page-navigation")&&setAttributes(document.body,{"data-bs-spy":"scroll","data-bs-target":"#page-navigation","data-bs-offset":"0",class:"page-navigation__scrollspy",tabindex:"0"})}function setAttributes(e,t){for(var i in t)e.setAttribute(i,t[i])}function pageSlider(){let e=document.querySelector(".page-swiper"),t=document.querySelector(".pages-selector__active"),i=document.querySelector(".pages-selector__all");if(isMobile()&&e)e.classList.add("page-swiper--disabled"),e.firstElementChild.style="flex-direction: column";else if(e){const e=new Swiper(".page-swiper",{direction:"vertical",keyboard:{enabled:!0,onlyInViewport:!1},pagination:{el:".pages-selector__pagination",clickable:!0,type:"bullets"}});function a(){i.innerHTML="/ "+e.slides.length,t.innerHTML=""+(e.realIndex+1)}a(),e.on("slideChange",(function(){e.slides[e.realIndex].scrollTo(0,0),a()}))}}function pictureModal(){document.addEventListener("click",e=>{if("#pictureModal"===e.target.getAttribute("data-bs-target")){let t=e.target.querySelector("img").getAttribute("src");document.querySelector(".pictureModal__picture").setAttribute("src",t)}})}function mapInit(){let e=document.querySelector(".map");if(e){let n=document.querySelectorAll(".map__button"),r=[],o=null,l=null;a(n[0].getAttribute("data-map-uid"));var t=new ymaps.Clusterer({clusterDisableClickZoom:!1,clusterOpenBalloonOnClick:!1}),i=new ymaps.Map("map",{center:[o,l],zoom:12,controls:["smallMapDefaultSet"]},{autoFitToViewport:"always"});function a(e){o=e.split(", ")[0],l=e.split(", ")[1]}i.geoObjects.add(t),n.forEach(e=>{let i=e.getAttribute("data-map-uid");o=i.split(", ")[0],l=i.split(", ")[1],function(e,t){r.push(new ymaps.Placemark([e,t],{balloonContentBody:"Текст в балуне"},{iconLayout:"default#image",iconImageHref:"./assets/img/icons/map.svg",iconImageSize:[70,70],iconImageOffset:[-35,-35]}))}(o,l),t.add(r)}),e.addEventListener("click",e=>{let t=e.target.closest(".map__button").getAttribute("data-map-uid");n.forEach(e=>{e.classList.remove("map__button--active")}),e.target.closest(".map__button").classList.toggle("map__button--active"),a(t),i.setCenter([o,l])})}}document.addEventListener("DOMContentLoaded",(function(){ymaps.ready(mapInit),dualSwitcher(document.querySelector(".cranes")),dualSwitcher(document.querySelector(".features")),swipersInit(),handleTabletChange(),addScrollSpy(),pictureModal(),sendForm(),navigationHighLigth()}));